<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../extension-icon/extension-icon.html">
<link rel="import" href="../chrome-devreloader/chrome-devreloader.html">
<link rel="import" href="../github-oauth/github-oauth.html">
<link rel="import" href="../gravatar-detector/gravatar-detector.html">
<link rel="import" href="../conference-tab/conference-tab.html">
<link rel="import" href="../event-bus/chrome-event-relay.html">
<link rel="import" href="../event-bus/chrome-tab-event-relay.html">
<link rel="import" href="../event-bus/websocket-event-sink.html">

<polymer-element name="workrooms-application" attributes="config calls userprofiles serverconfig">
<template>
  <!--send along events to the extension from the websocket-->
  <chrome-event-relay id="local" events="configured calls userprofiles ice offer answer hangup autocomplete">
  <!--send along events to all tabs coming from the websocket, used in content scripts-->
  <chrome-tab-event-relay events="online">
  <websocket-event-sink id="server" events="userprofile register call ice offer answer hangup autocomplete isonline" server="{{config.signallingServer}}">
  <!--this will get chrome messages that need a chance at the socket-->
  <chrome-event-relay>
  <chrome-devreloader config="{{ config }}"></chrome-devreloader>
  <extension-icon id="icon"></extension-icon>
  <github-oauth id="github" clientid="{{ serverconfig.github.clientid }}" clientsecret="{{ serverconfig.github.clientsecret }}"></github-oauth>
  <gravatar-detector></gravatar-detector>
  <conference-tab></conference-tab>
  </chrome-event-relay>
  </websocket-event-sink>
  </chrome-tab-event-relay>
  </chrome-event-relay>
</template>
<script src="./workrooms-application.js"></script>
</polymer-element>
