<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../local-stream/local-stream.html">
<link rel="import" href="../ui-video-stream/audio-control.html">
<link rel="import" href="../ui-video-stream/video-control.html">
<link rel="import" href="../ui-local-video/ui-local-video.html">
<link rel="import" href="../ui-video-call/ui-video-call.html">
<link rel="import" href="../ui-toolbar/ui-toolbar.html">
<link rel="import" href="../ui-sidebar/ui-sidebar.html">
<link rel="import" href="../ui-input/ui-input.html">
<link rel="import" href="../ui-user-profile/ui-user-profile.html">
<link rel="import" href="../ui-hide/ui-hide.html">
<link rel="stylesheet" type="text/css" href="./conference-room.css">
<link rel="stylesheet" type="text/css" href="../animate.css/animate.min.css">

<polymer-element name="conference-room" attributes="userprofiles localstream calls serverConfig">
<template>
  <video-control stream="{{localstream}}">
  <audio-control stream="{{localstream}}">
  <local-stream id="local" audio video>
  <ui-sidebar id="sidebar">
  <span class="grid grid--gutters">
    <ui-input class="grid-cell" icon="fa-search" placeholder="Search..."></ui-input>
  </span>
  <span class="grid grid--gutters">
    <ul class="ui list grid-cell">
      <template id="searchresults" repeat="{{profile in profiles}}">
        <li class="profile">
          <ui-user-profile class="grid-cell animated flipInX" profile="{{profile}}"></ui-user-profile>
        </li>
      </template>
    </ul>
  </span>
  </ui-sidebar>
  <ui-toolbar>
  <ui-command-tool icon="fa-bars" command="sidebar"></ui-command-tool>
  <ui-toggle-tool icon="fa-eye" togglechanged="selfie"></ui-toggle-tool>
  <ui-toggle-tool icon="fa-video-camera" togglechanged="video" active></ui-toggle-tool>
  <ui-toggle-tool icon="fa-microphone" togglechanged="audio" active></ui-toggle-tool>
  <ui-command-tool icon="fa-phone fa-rotate-135" command="hangup"></ui-command-tool>
  <ui-command-tool icon="fa-superscript" command="debugcallself"></ui-command-tool>
  <ui-right-toolbar>
  <ui-command-tool icon="fa-sign-in" command="getuserprofile"></ui-command-tool>
  <ui-command-tool icon="fa-sign-out" command="signout"></ui-command-tool>
  </ui-right-toolbar>
  </ui-toolbar>
  <span class="calls">
    <ui-local-video id="selfie" class="animated flipInX" stream="{{localstream}}" userprofiles="{{userprofiles}}"></ui-local-video>
    <template id="calls" repeat="{{call in calls}}">
      <ui-video-call class="animated flipInX" outbound?="{{call.outbound}}" inbound?="{{call.inbound}}" callid="{{call.callid}}" userprofiles="{{call.userprofiles}}" localstream="{{localstream}}" config="{{serverConfig}}"></ui-video-call>
    </template>
  </span>
  </local-stream>
  </audio-control>
  </video-control>
</template>
<script src="./conference-room.js"></script>
</polymer-element>
